{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Auth."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "role": {
          "type": "string",
          "description": "The user's role.",
          "enum": [
            "ADMIN",
            "MANAGER",
            "OFFICER",
            "WORKER"
          ]
        },
        "department": {
          "type": "string",
          "description": "The department the user belongs to.",
          "enum": [
            "MANAGEMENT",
            "OFFICE",
            "CAR_SERVICE",
            "COMMONRAIL",
            "MECHANIC",
            "OUTSOURCE"
          ]
        },
        "status": {
          "type": "string",
          "description": "The user's account status.",
          "enum": [
            "ACTIVE",
            "PENDING",
            "SUSPENDED"
          ]
        },
        "personal": {
          "type": "object",
          "description": "Personal information of the user.",
          "properties": {
            "idCardNo": {
              "type": "string"
            },
            "address": {
              "type": "string"
            },
            "bank": {
              "type": "object",
              "properties": {
                "bankName": {
                  "type": "string"
                },
                "accountName": {
                  "type": "string"
                },
                "accountNo": {
                  "type": "string"
                }
              }
            },
            "emergencyContact": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "relationship": {
                  "type": "string"
                },
                "phone": {
                  "type": "string"
                }
              }
            }
          }
        },
        "hr": {
          "type": "object",
          "description": "HR-related information for the user.",
          "properties": {
            "salaryMonthly": {
              "type": "number"
            },
            "payType": {
              "type": "string",
              "enum": [
                "MONTHLY",
                "DAILY",
                "MONTHLY_NOSCAN",
                "NOPAY"
              ]
            },
            "startDate": {
              "type": "string",
              "format": "date",
              "description": "The user's start date of employment."
            },
            "endDate": {
              "type": "string",
              "format": "date",
              "description": "The user's end date of employment."
            },
            "ssoHospital": {
              "type": "string"
            },
            "note": {
              "type": "string"
            }
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the user was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the user was last updated."
        },
        "lastAttendance": {
          "type": "object",
          "description": "The user's last attendance record to avoid complex queries.",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "IN",
                "OUT"
              ]
            },
            "timestamp": {
              "type": "string",
              "format": "date-time"
            }
          }
        }
      },
      "required": [
        "uid",
        "displayName",
        "email",
        "phone",
        "createdAt",
        "updatedAt"
      ]
    },
    "Customer": {
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the customer."
        },
        "name": {
          "type": "string",
          "description": "The customer's name."
        },
        "phone": {
          "type": "string",
          "description": "The customer's phone number."
        },
        "detail": {
          "type": "string",
          "description": "Additional details about the customer."
        },
        "useTax": {
          "type": "boolean",
          "description": "Indicates whether the customer uses tax."
        },
        "taxName": {
          "type": "string",
          "description": "The customer's tax name (if useTax is true)."
        },
        "taxAddress": {
          "type": "string",
          "description": "The customer's tax address (if useTax is true)."
        },
        "taxId": {
          "type": "string",
          "description": "The customer's tax ID (if useTax is true)."
        },
        "taxBranchType": {
            "type": "string",
            "description": "Branch type for tax purposes.",
            "enum": ["HEAD_OFFICE", "BRANCH"]
        },
        "taxBranchNo": {
            "type": "string",
            "description": "5-digit branch number if type is 'BRANCH'."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the customer was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp of when the customer was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "phone",
        "detail",
        "useTax",
        "createdAt",
        "updatedAt"
      ]
    },
    "Vendor": {
      "title": "Vendor",
      "type": "object",
      "description": "Represents a vendor or supplier.",
      "properties": {
        "id": { "type": "string" },
        "shortName": { "type": "string", "description": "Unique, short identifier for the vendor (e.g., 'BBL', 'SDK')." },
        "companyName": { "type": "string", "description": "Full legal name of the vendor company/store." },
        "vendorType": { "type": "string", "enum": ["SUPPLIER", "GENERAL", "CONTRACTOR"] },
        "address": { "type": "string" },
        "phone": { "type": "string" },
        "contactName": { "type": "string" },
        "contactPhone": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "taxId": { "type": "string" },
        "notes": { "type": "string" },
        "isActive": { "type": "boolean", "default": true },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "shortName", "companyName", "vendorType", "isActive", "createdAt", "updatedAt"]
    },
    "Job": {
      "title": "Job",
      "type": "object",
      "description": "Represents a job.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the job."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to Customer. (Relationship: Customer 1:N Job)"
        },
        "customerSnapshot": {
          "type": "object",
          "description": "Snapshot of customer data (name, phone) at the time the job was created.",
          "properties": {
            "name": {
              "type": "string"
            },
            "phone": {
              "type": "string"
            },
            "useTax": {
              "type": "boolean"
            }
          },
          "required": [
            "name",
            "phone"
          ]
        },
        "department": {
          "type": "string",
          "description": "The department responsible for the job (CAR_SERVICE, COMMONRAIL, MECHANIC, OUTSOURCE)."
        },
        "status": {
          "type": "string",
          "description": "The job's status (RECEIVED, IN_PROGRESS, WAITING_QUOTATION, WAITING_APPROVE, PENDING_PARTS, IN_REPAIR_PROCESS, DONE, WAITING_CUSTOMER_PICKUP, CLOSED).",
          "enum": [
            "RECEIVED",
            "IN_PROGRESS",
            "WAITING_QUOTATION",
            "WAITING_APPROVE",
            "PENDING_PARTS",
            "IN_REPAIR_PROCESS",
            "DONE",
            "WAITING_CUSTOMER_PICKUP",
            "CLOSED"
          ]
        },
        "description": {
          "type": "string",
          "description": "Description of the job (symptoms/details)."
        },
        "officeNote": {
          "type": "string",
          "description": "Internal notes for the office department."
        },
        "photos": {
          "type": "array",
          "description": "Array of URLs for photos related to the job.",
          "items": {
            "type": "string"
          }
        },
        "technicalReport": {
          "type": "string",
          "description": "Technical report or test results, mainly for COMMONRAIL and MECHANIC jobs."
        },
        "carServiceDetails": {
          "type": "object",
          "description": "Details specific to Car Service jobs.",
          "properties": {
            "brand": { "type": "string" },
            "model": { "type": "string" },
            "licensePlate": { "type": "string" }
          }
        },
        "commonrailDetails": {
          "type": "object",
          "description": "Details specific to Commonrail jobs.",
          "properties": {
            "brand": { "type": "string" },
            "partNumber": { "type": "string" },
            "registrationNumber": { "type": "string" }
          }
        },
        "mechanicDetails": {
          "type": "object",
          "description": "Details specific to Mechanic jobs.",
          "properties": {
            "brand": { "type": "string" },
            "partNumber": { "type": "string" },
            "registrationNumber": { "type": "string" }
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the job was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp of when the job was last updated.",
          "format": "date-time"
        },
        "lastActivityAt": {
          "type": "string",
          "description": "Timestamp of the last activity related to the job.",
          "format": "date-time"
        },
        "pickupDate": {
          "type": "string",
          "format": "date",
          "description": "Date the customer picked up the item."
        },
        "closedDate": {
          "type": "string",
          "format": "date",
          "description": "Date the job was closed."
        },
        "salesDocType": {
          "type": "string",
          "enum": ["DELIVERY_NOTE", "TAX_INVOICE"],
          "description": "The type of sales document associated with the closed job."
        },
        "salesDocId": {
          "type": "string",
          "description": "The ID of the sales document associated with the closed job."
        },
        "salesDocNo": {
          "type": "string",
          "description": "The document number of the sales document for quick reference."
        },
        "paymentStatusAtClose": {
          "type": "string",
          "enum": ["PAID", "UNPAID"],
          "description": "The payment status at the moment the job was closed."
        }
      },
      "required": [
        "id",
        "customerId",
        "customerSnapshot",
        "department",
        "status",
        "description",
        "photos",
        "createdAt",
        "updatedAt",
        "lastActivityAt"
      ]
    },
    "AccountingEntry": {
      "title": "Accounting Entry",
      "description": "An immutable record of a financial transaction.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "entryType": { "type": "string", "enum": ["RECEIPT", "CASH_IN", "CASH_OUT"] },
        "entryDate": { "type": "string", "format": "date" },
        "amount": { "type": "number" },
        "accountId": { "type": "string" },
        "description": { "type": "string" },
        "categoryMain": { "type": "string" },
        "categorySub": { "type": "string" },
        "paymentMethod": { "type": "string", "enum": ["CASH", "TRANSFER", "CREDIT"] },
        "vendorId": { "type": "string" },
        "billType": { "type": "string", "enum": ["RECEIPT", "TAX_INVOICE", "OTHER"] },
        "isVat": { "type": "boolean" },
        "vatAmount": { "type": "number" },
        "whtEnabled": { "type": "boolean" },
        "whtPercent": { "type": "number" },
        "whtAmount": { "type": "number" },
        "whtDocId": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      }
    }
  }
}
