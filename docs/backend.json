{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Auth."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "role": {
          "type": "string",
          "description": "The user's role.",
          "enum": [
            "ADMIN",
            "MANAGER",
            "OFFICER",
            "WORKER"
          ]
        },
        "department": {
          "type": "string",
          "description": "The department the user belongs to.",
          "enum": [
            "MANAGEMENT",
            "OFFICE",
            "CAR_SERVICE",
            "COMMONRAIL",
            "MECHANIC",
            "OUTSOURCE"
          ]
        },
        "status": {
          "type": "string",
          "description": "The user's account status.",
          "enum": [
            "ACTIVE",
            "PENDING",
            "SUSPENDED"
          ]
        },
        "personal": {
          "type": "object",
          "description": "Personal information of the user.",
          "properties": {
            "idCardNo": { "type": "string" },
            "address": { "type": "string" },
            "bank": {
              "type": "object",
              "properties": {
                "bankName": { "type": "string" },
                "accountName": { "type": "string" },
                "accountNo": { "type": "string" }
              }
            },
            "emergencyContact": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "relationship": { "type": "string" },
                "phone": { "type": "string" }
              }
            }
          }
        },
        "hr": {
          "type": "object",
          "description": "HR-related information for the user.",
          "properties": {
            "salaryMonthly": { "type": "number" },
            "payType": {
              "type": "string",
              "enum": [
                "MONTHLY",
                "DAILY",
                "MONTHLY_NOSCAN",
                "NOPAY"
              ]
            },
            "startDate": {
              "type": "string",
              "format": "date",
              "description": "The user's start date of employment."
            },
            "endDate": {
              "type": "string",
              "format": "date",
              "description": "The user's end date of employment."
            },
            "ssoHospital": { "type": "string" },
            "note": { "type": "string" }
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the user was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the user was last updated."
        }
      },
      "required": [
        "uid",
        "displayName",
        "email",
        "phone",
        "createdAt",
        "updatedAt"
      ]
    },
    "Customer": {
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "phone": { "type": "string" },
        "detail": { "type": "string" },
        "useTax": { "type": "boolean" },
        "taxName": { "type": "string" },
        "taxAddress": { "type": "string" },
        "taxId": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    },
    "Vendor": {
      "title": "Vendor",
      "type": "object",
      "description": "Represents a vendor or supplier.",
      "properties": {
        "id": { "type": "string" },
        "shortName": { "type": "string" },
        "companyName": { "type": "string" },
        "vendorType": { "type": "string", "enum": ["SUPPLIER", "GENERAL", "CONTRACTOR"] },
        "address": { "type": "string" },
        "phone": { "type": "string" },
        "contactName": { "type": "string" },
        "taxId": { "type": "string" },
        "isActive": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    },
    "AccountingEntry": {
      "title": "Accounting Entry",
      "description": "An immutable record of a financial transaction (RECEIPT, CASH_IN, CASH_OUT).",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "entryType": { "type": "string", "enum": ["RECEIPT", "CASH_IN", "CASH_OUT"] },
        "entryDate": { "type": "string", "format": "date" },
        "amount": { "type": "number", "description": "ยอดเงินรวมสุทธิ (Net Total)" },
        "accountId": { "type": "string", "description": "ID ของบัญชีเงินสด/ธนาคาร" },
        "description": { "type": "string" },
        "categoryMain": { "type": "string" },
        "categorySub": { "type": "string" },
        "paymentMethod": { "type": "string", "enum": ["CASH", "TRANSFER", "CREDIT"] },
        "vendorId": { "type": "string", "description": "ID ของร้านค้า (สำหรับ CASH_OUT)" },
        "vendorShortNameSnapshot": { "type": "string" },
        "vendorNameSnapshot": { "type": "string" },
        "billType": { 
          "type": "string", 
          "enum": ["NO_BILL", "NO_TAX_INVOICE", "TAX_INVOICE"],
          "description": "ประเภทหลักฐานการจ่าย (สำหรับ CASH_OUT)"
        },
        "vatRate": { "type": "number", "enum": [0, 7], "description": "อัตรา VAT (สำหรับ CASH_OUT)" },
        "vatAmount": { "type": "number", "description": "จำนวนภาษีมูลค่าเพิ่ม" },
        "netAmount": { "type": "number", "description": "ยอดเงินก่อน VAT" },
        "withholdingEnabled": { "type": "boolean", "description": "มีการหักภาษี ณ ที่จ่ายหรือไม่" },
        "withholdingPercent": { "type": "number", "enum": [1, 3], "description": "เปอร์เซ็นต์ที่หัก (1% หรือ 3%)" },
        "withholdingAmount": { "type": "number", "description": "จำนวนเงินที่หักไว้" },
        "withholdingTaxDocId": { "type": "string", "description": "ID ของใบหัก ณ ที่จ่ายที่เกี่ยวข้อง" },
        "createdAt": { "type": "string", "format": "date-time" }
      }
    },
    "QuotationTemplate": {
      "title": "Quotation Template",
      "description": "A reusable set of line items for creating quotations.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "items": { "type": "array" },
        "notes": { "type": "string" },
        "discountAmount": { "type": "number" },
        "withTax": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/users/{uid}": {
      "schema": { "$ref": "#/backend/entities/UserProfile" },
      "description": "User profiles and HR data."
    },
    "/customers/{id}": {
      "schema": { "$ref": "#/backend/entities/Customer" },
      "description": "Customer information."
    },
    "/vendors/{id}": {
      "schema": { "$ref": "#/backend/entities/Vendor" },
      "description": "Vendor and Supplier information."
    },
    "/accountingEntries/{entryId}": {
      "schema": { "$ref": "#/backend/entities/AccountingEntry" },
      "description": "Records of all financial transactions."
    },
    "/quotationTemplates/{id}": {
      "schema": { "$ref": "#/backend/entities/QuotationTemplate" },
      "description": "Reusable quotation item sets."
    }
  }
}